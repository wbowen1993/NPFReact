{"ast":null,"code":"import _defineProperty from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/bowenwang/Nodejs_project/NPFReact/src/component/User/User.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport \"./login.css\";\nimport Notification from \"../Control/Notification\";\nimport user_img from \"./user.png\";\nimport pwd_img from \"./pwd.png\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n    _this.state = {\n      hover1: false,\n      hover2: false\n    };\n    _this.toggleHover1 = _this.toggleHover1.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggleHover2 = _this.toggleHover2.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"toggleHover1\",\n    value: function toggleHover1() {\n      this.setState({\n        hover1: !this.state.hover1\n      });\n    }\n  }, {\n    key: \"toggleHover2\",\n    value: function toggleHover2() {\n      this.setState({\n        hover2: !this.state.hover2\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var width1, width2;\n\n      if (this.state.hover1) {\n        width2 = {\n          width: '40%'\n        };\n        width1 = {\n          width: '60%'\n        };\n      } else {\n        width2 = {\n          width: '50%'\n        };\n      }\n\n      if (this.state.hover2) {\n        width1 = {\n          width: '40%'\n        };\n        width2 = {\n          width: '60%'\n        };\n      } else {\n        if (this.state.hover1) {\n          width1 = {\n            width: '60%'\n          };\n        } else {\n          width1 = {\n            width: '50%'\n          };\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: \"login-board\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"formHeader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input_div user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"input_icon\",\n        src: user_img,\n        alt: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form_input\",\n        name: \"email\",\n        placeholder: \"email address\",\n        onChange: this.props.handlers.changeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, this.props.error.email_err ? this.props.error.email_err : \"\")), React.createElement(\"div\", {\n        className: \"input_div pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"input_icon\",\n        src: pwd_img,\n        alt: \"pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form_input\",\n        name: \"password\",\n        placeholder: \"password(min. 8 characters)\",\n        onChange: this.props.handlers.changeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, this.props.error.password_err ? this.props.error.password_err : \"\")), React.createElement(\"div\", {\n        className: \"input_div pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"input_icon\",\n        src: pwd_img,\n        alt: \"pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form_input\",\n        name: \"reenter\",\n        placeholder: \"reenter the password\",\n        onChange: this.props.handlers.changeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.error.reenter_err ? this.props.error.reenter_err : \"\")), React.createElement(\"div\", {\n        className: \"submit-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn submit-btn\",\n        onMouseEnter: this.toggleHover1,\n        onMouseLeave: this.toggleHover1,\n        onClick: this.props.handlers.showHandler,\n        style: width1,\n        id: \"signup-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"LOG IN\"), React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn submit-btn\",\n        onMouseEnter: this.toggleHover2,\n        onMouseLeave: this.toggleHover2,\n        onClick: this.props.handlers.signupSubmitHandler,\n        style: width2,\n        id: \"login-btn\",\n        value: \"SIGN UP\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(Login, _Component2);\n\n  function Login(props) {\n    var _this2;\n\n    _classCallCheck(this, Login);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this2.state = {\n      hover1: false,\n      hover2: false\n    };\n    _this2.toggleHover1 = _this2.toggleHover1.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    _this2.toggleHover2 = _this2.toggleHover2.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n    return _this2;\n  }\n\n  _createClass(Login, [{\n    key: \"toggleHover1\",\n    value: function toggleHover1() {\n      this.setState({\n        hover1: !this.state.hover1\n      });\n    }\n  }, {\n    key: \"toggleHover2\",\n    value: function toggleHover2() {\n      this.setState({\n        hover2: !this.state.hover2\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var width1, width2;\n\n      if (this.state.hover1) {\n        width2 = {\n          width: '40%'\n        };\n        width1 = {\n          width: '60%'\n        };\n      } else {\n        width2 = {\n          width: '50%'\n        };\n      }\n\n      if (this.state.hover2) {\n        width1 = {\n          width: '40%'\n        };\n        width2 = {\n          width: '60%'\n        };\n      } else {\n        if (this.state.hover1) {\n          width1 = {\n            width: '60%'\n          };\n        } else {\n          width1 = {\n            width: '50%'\n          };\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: \"login-board\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"formHeader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Welcome\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input_div user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"input_icon\",\n        src: user_img,\n        alt: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form_input\",\n        name: \"email\",\n        placeholder: \"email address\",\n        onChange: this.props.handlers.changeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, this.props.error.email_err ? this.props.error.email_err : \"\")), React.createElement(\"div\", {\n        className: \"input_div pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"input_icon\",\n        src: pwd_img,\n        alt: \"pwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form_input\",\n        name: \"password\",\n        placeholder: \"password(min. 8 characters)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.props.error.password_err ? this.props.error.password_err : \"\")), React.createElement(\"div\", {\n        className: \"forget\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"FORGET PASSOWORD?\")), React.createElement(\"div\", {\n        className: \"submit-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn submit-btn\",\n        onMouseEnter: this.toggleHover1,\n        onMouseLeave: this.toggleHover1,\n        onClick: this.props.handlers.loginSubmitHandler,\n        style: width1,\n        id: \"login-btn\",\n        value: \"LOG IN\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn submit-btn\",\n        onMouseEnter: this.toggleHover2,\n        onMouseLeave: this.toggleHover2,\n        onClick: this.props.handlers.showHandler,\n        style: width2,\n        id: \"signup-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"SIGN UP\")))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar User =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(User, _Component3);\n\n  function User(props) {\n    var _this3;\n\n    _classCallCheck(this, User);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(User).call(this, props));\n\n    _this3.renderRedirect = function () {\n      if (_this3.state.redirect) return React.createElement(Redirect, {\n        to: {\n          pathname: '/notification',\n          msg: _this3.state.notif_msg\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      });\n    };\n\n    _this3.state = {\n      email: '',\n      password: '',\n      reenter: '',\n      email_err: '',\n      password_err: '',\n      reenter_err: '',\n      login_disp: true,\n      redirect: false,\n      notif_msg: ''\n    };\n    _this3.handleChange = _this3.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.showValidation = _this3.showValidation.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.clearValidation = _this3.clearValidation.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.handleSignUpSubmit = _this3.handleSignUpSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.handleLoginSubmit = _this3.handleLoginSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.boxShow = _this3.boxShow.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.validate = _this3.validate.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.verify = _this3.verify.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.renderRedirect = _this3.renderRedirect.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    return _this3;\n  }\n\n  _createClass(User, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n      this.validate([event.target.name], event.target.value);\n    } //state code as property to pass to the notification page \n\n  }, {\n    key: \"handleSignUpSubmit\",\n    value: function handleSignUpSubmit(event) {\n      var _this4 = this;\n\n      var SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n\n      if (this.verify()) {\n        fetch(\"/user/signup\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            \"email\": this.state.email,\n            \"password\": this.state.password\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          if (res.state === 1) _this4.showValidation(\"email_err\", res.msg);else if (res.state === 0) {\n            //TODO redict notification page\n            _this4.setState({\n              redirect: true,\n              notif_msg: res.msg,\n              state: 1\n            });\n          } else {//TODO redirect signin page\n          }\n        }).catch(function (err) {\n          console.log(err);\n\n          _this4.setState({\n            redirect: true,\n            notif_msg: SERVER_ERR_MSG,\n            state: 0\n          });\n        });\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleLoginSubmit\",\n    value: function handleLoginSubmit(event) {\n      var _this5 = this;\n\n      var SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n\n      if (this.verify()) {\n        fetch(\"/user/login\", {\n          method: 'POST',\n          body: JSON.stringify({\n            \"email\": this.state.email,\n            \"password\": this.state.password\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          if (res.state === 1) _this5.showValidation(\"email_err\", res.msg);else if (res.state === 0) {\n            //TODO redict notification page\n            _this5.setState({\n              redirect: true,\n              notif_msg: res.msg,\n              state: 0\n            });\n          } else {//TODO redirect profile page\n            // this.boxShow();\n          }\n        }).catch(function (err) {\n          console.log(err);\n\n          _this5.setState({\n            redirect: true,\n            notif_msg: SERVER_ERR_MSG,\n            state: 0\n          });\n        });\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"boxShow\",\n    value: function boxShow() {\n      this.setState({\n        login_disp: !this.state.login_disp\n      });\n    }\n  }, {\n    key: \"showValidation\",\n    value: function showValidation(elm, msg) {\n      this.setState(_defineProperty({}, elm, msg));\n    }\n  }, {\n    key: \"clearValidation\",\n    value: function clearValidation(elm) {\n      this.setState(_defineProperty({}, elm, ''));\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(type, value) {\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      if (type == 'email') {\n        if (!re.test(String(value).toLowerCase())) {\n          this.showValidation(\"email_err\", \"Please type valid email\");\n        } else {\n          this.clearValidation(\"email_err\");\n        }\n      }\n\n      if (type == 'password') {\n        var validPassword = false;\n        if (value.length >= 8 && /\\d/.test(value) && /[a-z]/.test(value) && /[A-Z]/.test(value)) validPassword = true; // console.log(value);\n\n        if (this.state.password != '' && !validPassword) {\n          this.showValidation(\"password_err\", \"Password must contain\\n1. 8 characters at least;\\n2. digit, uppercase and lowercase\");\n        } else {\n          console.log(\"passed\");\n          this.clearValidation(\"password_err\");\n        }\n      }\n\n      if (type == 'reenter') {\n        if (!this.state.login_disp && value != '' && value != this.state.password) {\n          this.showValidation(\"reenter_err\", \"Different with your password\");\n        } else {\n          this.clearValidation(\"reenter_err\");\n        }\n      } // this.verify();\n\n    }\n  }, {\n    key: \"verify\",\n    value: function verify() {\n      if (this.state.email_err == '' && this.state.password_err.length == '' && this.state.reenter_err == '') return true;\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var handlers = {\n        showHandler: this.boxShow,\n        changeHandler: this.handleChange,\n        loginSubmitHandler: this.handleLoginSubmit,\n        signupSubmitHandler: this.handleSignUpSubmit,\n        verifyHandler: this.verify\n      };\n      var errorMsg = {\n        email_err: this.state.email_err,\n        password_err: this.state.password_err,\n        reenter_err: this.state.reenter_err\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, this.renderRedirect(), React.createElement(\"div\", {\n        className: \"bng\",\n        id: \"user_bng\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, this.state.login_disp && React.createElement(Login, {\n        handlers: handlers,\n        error: errorMsg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }), !this.state.login_disp && React.createElement(Signup, {\n        handlers: handlers,\n        error: errorMsg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport { User as default };","map":{"version":3,"sources":["/Users/bowenwang/Nodejs_project/NPFReact/src/component/User/User.js"],"names":["React","Component","Redirect","Notification","user_img","pwd_img","Signup","props","state","hover1","hover2","toggleHover1","bind","toggleHover2","setState","width1","width2","width","handleSubmit","handlers","changeHandler","error","email_err","password_err","reenter_err","showHandler","signupSubmitHandler","Login","loginSubmitHandler","User","renderRedirect","redirect","pathname","msg","notif_msg","email","password","reenter","login_disp","handleChange","showValidation","clearValidation","handleSignUpSubmit","handleLoginSubmit","boxShow","validate","verify","event","target","name","value","SERVER_ERR_MSG","fetch","method","headers","body","JSON","stringify","then","res","json","catch","err","console","log","preventDefault","elm","type","re","test","String","toLowerCase","validPassword","length","verifyHandler","errorMsg"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAO,aAAP;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;;IAEMC,M;;;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,KADG;AAEXC,MAAAA,MAAM,EAAE;AAFG,KAAb;AAKA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AARiB;AASlB;;;;mCAEa;AACZ,WAAKE,QAAL,CAAc;AAACL,QAAAA,MAAM,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAArB,OAAd;AACD;;;mCAEa;AACZ,WAAKK,QAAL,CAAc;AAACJ,QAAAA,MAAM,EAAE,CAAC,KAAKF,KAAL,CAAWE;AAArB,OAAd;AACD;;;6BAEO;AAEN,UAAIK,MAAJ,EAAYC,MAAZ;;AACA,UAAI,KAAKR,KAAL,CAAWC,MAAf,EAAuB;AACrBO,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACAF,QAAAA,MAAM,GAAG;AAACE,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD,OAHD,MAGO;AACLD,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD;;AAED,UAAI,KAAKT,KAAL,CAAWE,MAAf,EAAuB;AACrBK,QAAAA,MAAM,GAAG;AAACE,UAAAA,KAAK,EAAE;AAAR,SAAT;AACAD,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD,OAHD,MAGO;AACL,YAAG,KAAKT,KAAL,CAAWC,MAAd,EAAqB;AACnBM,UAAAA,MAAM,GAAG;AAACE,YAAAA,KAAK,EAAE;AAAR,WAAT;AACD,SAFD,MAGI;AACFF,UAAAA,MAAM,GAAG;AAACE,YAAAA,KAAK,EAAE;AAAR,WAAT;AACD;AACF;;AAED,aACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADA,EAEA;AAAM,QAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAG,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAG,YAAjB;AAA8B,QAAA,GAAG,EAAId,QAArC;AAA+C,QAAA,GAAG,EAAC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAO,QAAA,IAAI,EAAG,MAAd;AAAqB,QAAA,SAAS,EAAC,YAA/B;AAA4C,QAAA,IAAI,EAAC,OAAjD;AAAyD,QAAA,WAAW,EAAC,eAArE;AAAqF,QAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWY,QAAX,CAAoBC,aAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKb,KAAL,CAAWc,KAAX,CAAiBC,SAAjB,GAA6B,KAAKf,KAAL,CAAWc,KAAX,CAAiBC,SAA9C,GAA0D,EAAlF,CAHF,CADJ,EAMI;AAAK,QAAA,SAAS,EAAE,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAG,YAAjB;AAA8B,QAAA,GAAG,EAAIjB,OAArC;AAA8C,QAAA,GAAG,EAAC,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAO,QAAA,IAAI,EAAG,UAAd;AAAyB,QAAA,SAAS,EAAC,YAAnC;AAAgD,QAAA,IAAI,EAAC,UAArD;AAAgE,QAAA,WAAW,EAAC,6BAA5E;AAA0G,QAAA,QAAQ,EAAE,KAAKE,KAAL,CAAWY,QAAX,CAAoBC,aAAxI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKb,KAAL,CAAWc,KAAX,CAAiBE,YAAjB,GAAgC,KAAKhB,KAAL,CAAWc,KAAX,CAAiBE,YAAjD,GAAgE,EAAxF,CAHF,CANJ,EAWI;AAAK,QAAA,SAAS,EAAE,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAG,YAAjB;AAA8B,QAAA,GAAG,EAAIlB,OAArC;AAA8C,QAAA,GAAG,EAAC,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAO,QAAA,IAAI,EAAG,UAAd;AAAyB,QAAA,SAAS,EAAC,YAAnC;AAAgD,QAAA,IAAI,EAAC,SAArD;AAA+D,QAAA,WAAW,EAAC,sBAA3E;AAAkG,QAAA,QAAQ,EAAE,KAAKE,KAAL,CAAWY,QAAX,CAAoBC,aAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKb,KAAL,CAAWc,KAAX,CAAiBG,WAAjB,GAA+B,KAAKjB,KAAL,CAAWc,KAAX,CAAiBG,WAAhD,GAA8D,EAAtF,CAHF,CAXJ,EAgBI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,SAAS,EAAC,gBAAlB;AAAmC,QAAA,YAAY,EAAE,KAAKb,YAAtD;AAAoE,QAAA,YAAY,EAAE,KAAKA,YAAvF;AAAqG,QAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWY,QAAX,CAAoBM,WAAlI;AAA+I,QAAA,KAAK,EAAEV,MAAtJ;AAA8J,QAAA,EAAE,EAAC,YAAjK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,gBAA/B;AAAgD,QAAA,YAAY,EAAE,KAAKF,YAAnE;AAAiF,QAAA,YAAY,EAAE,KAAKA,YAApG;AAAkH,QAAA,OAAO,EAAE,KAAKN,KAAL,CAAWY,QAAX,CAAoBO,mBAA/I;AAAoK,QAAA,KAAK,EAAEV,MAA3K;AAAmL,QAAA,EAAE,EAAC,WAAtL;AAAkM,QAAA,KAAK,EAAC,SAAxM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAhBJ,CAFA,CADF,CADF;AA4BD;;;;EAtEkBf,S;;IAyEf0B,K;;;;;AACJ,iBAAYpB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,KADG;AAEXC,MAAAA,MAAM,EAAE;AAFG,KAAb;AAMA,WAAKC,YAAL,GAAoB,OAAKA,YAAL,CAAkBC,IAAlB,wDAApB;AACA,WAAKC,YAAL,GAAoB,OAAKA,YAAL,CAAkBD,IAAlB,wDAApB;AATiB;AAUlB;;;;mCAIa;AACZ,WAAKE,QAAL,CAAc;AAACL,QAAAA,MAAM,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAArB,OAAd;AACD;;;mCAEa;AACZ,WAAKK,QAAL,CAAc;AAACJ,QAAAA,MAAM,EAAE,CAAC,KAAKF,KAAL,CAAWE;AAArB,OAAd;AACD;;;6BAEO;AAEN,UAAIK,MAAJ,EAAYC,MAAZ;;AACA,UAAI,KAAKR,KAAL,CAAWC,MAAf,EAAuB;AACrBO,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACAF,QAAAA,MAAM,GAAG;AAACE,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD,OAHD,MAGO;AACLD,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD;;AAED,UAAI,KAAKT,KAAL,CAAWE,MAAf,EAAuB;AACrBK,QAAAA,MAAM,GAAG;AAACE,UAAAA,KAAK,EAAE;AAAR,SAAT;AACAD,QAAAA,MAAM,GAAG;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAT;AACD,OAHD,MAGO;AACL,YAAG,KAAKT,KAAL,CAAWC,MAAd,EAAqB;AACnBM,UAAAA,MAAM,GAAG;AAACE,YAAAA,KAAK,EAAE;AAAR,WAAT;AACD,SAFD,MAGI;AACFF,UAAAA,MAAM,GAAG;AAACE,YAAAA,KAAK,EAAE;AAAR,WAAT;AACD;AACF;;AAED,aACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADA,EAEA;AAAM,QAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAG,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAG,YAAjB;AAA8B,QAAA,GAAG,EAAId,QAArC;AAA+C,QAAA,GAAG,EAAC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAO,QAAA,IAAI,EAAG,MAAd;AAAqB,QAAA,SAAS,EAAC,YAA/B;AAA4C,QAAA,IAAI,EAAC,OAAjD;AAAyD,QAAA,WAAW,EAAC,eAArE;AAAqF,QAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWY,QAAX,CAAoBC,aAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKb,KAAL,CAAWc,KAAX,CAAiBC,SAAjB,GAA6B,KAAKf,KAAL,CAAWc,KAAX,CAAiBC,SAA9C,GAA0D,EAAlF,CAHF,CADJ,EAMI;AAAK,QAAA,SAAS,EAAE,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAG,YAAjB;AAA8B,QAAA,GAAG,EAAIjB,OAArC;AAA8C,QAAA,GAAG,EAAC,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAO,QAAA,IAAI,EAAG,UAAd;AAAyB,QAAA,SAAS,EAAC,YAAnC;AAAgD,QAAA,IAAI,EAAC,UAArD;AAAgE,QAAA,WAAW,EAAC,6BAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAG,QAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwB,KAAKE,KAAL,CAAWc,KAAX,CAAiBE,YAAjB,GAAgC,KAAKhB,KAAL,CAAWc,KAAX,CAAiBE,YAAjD,GAAgE,EAAxF,CAHF,CANJ,EAWI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CAXJ,EAcI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,gBAA/B;AAAgD,QAAA,YAAY,EAAE,KAAKZ,YAAnE;AAAiF,QAAA,YAAY,EAAE,KAAKA,YAApG;AAAkH,QAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWY,QAAX,CAAoBS,kBAA/I;AAAmK,QAAA,KAAK,EAAEb,MAA1K;AAAkL,QAAA,EAAE,EAAC,WAArL;AAAiM,QAAA,KAAK,EAAC,QAAvM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAQ,QAAA,SAAS,EAAC,gBAAlB;AAAmC,QAAA,YAAY,EAAE,KAAKF,YAAtD;AAAoE,QAAA,YAAY,EAAE,KAAKA,YAAvF;AAAqG,QAAA,OAAO,EAAE,KAAKN,KAAL,CAAWY,QAAX,CAAoBM,WAAlI;AAA+I,QAAA,KAAK,EAAET,MAAtJ;AAA8J,QAAA,EAAE,EAAC,YAAjK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,CAdJ,CAFA,CADF,CADF;AA0BD;;;;EAvEiBf,S;;IA0EC4B,I;;;;;AACnB,gBAAYtB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;;AADiB,WA6GnBuB,cA7GmB,GA6GF,YAAM;AACrB,UAAG,OAAKtB,KAAL,CAAWuB,QAAd,EACE,OAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE;AAACC,UAAAA,QAAQ,EAAC,eAAV;AAA2BC,UAAAA,GAAG,EAAE,OAAKzB,KAAL,CAAW0B;AAA3C,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH,KAhHkB;;AAEjB,WAAK1B,KAAL,GAAa;AACX2B,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,OAAO,EAAE,EAHE;AAIXf,MAAAA,SAAS,EAAC,EAJC;AAKXC,MAAAA,YAAY,EAAE,EALH;AAMXC,MAAAA,WAAW,EAAE,EANF;AAOXc,MAAAA,UAAU,EAAE,IAPD;AAQXP,MAAAA,QAAQ,EAAE,KARC;AASXG,MAAAA,SAAS,EAAC;AATC,KAAb;AAYA,WAAKK,YAAL,GAAoB,OAAKA,YAAL,CAAkB3B,IAAlB,wDAApB;AACA,WAAK4B,cAAL,GAAsB,OAAKA,cAAL,CAAoB5B,IAApB,wDAAtB;AACA,WAAK6B,eAAL,GAAuB,OAAKA,eAAL,CAAqB7B,IAArB,wDAAvB;AACA,WAAK8B,kBAAL,GAA0B,OAAKA,kBAAL,CAAwB9B,IAAxB,wDAA1B;AACA,WAAK+B,iBAAL,GAAyB,OAAKA,iBAAL,CAAuB/B,IAAvB,wDAAzB;AACA,WAAKgC,OAAL,GAAe,OAAKA,OAAL,CAAahC,IAAb,wDAAf;AACA,WAAKiC,QAAL,GAAgB,OAAKA,QAAL,CAAcjC,IAAd,wDAAhB;AACA,WAAKkC,MAAL,GAAc,OAAKA,MAAL,CAAYlC,IAAZ,wDAAd;AACA,WAAKkB,cAAL,GAAsB,OAAKA,cAAL,CAAoBlB,IAApB,wDAAtB;AAtBiB;AAuBlB;;;;iCAEYmC,K,EAAO;AAClB,WAAKjC,QAAL,qBAAgBiC,KAAK,CAACC,MAAN,CAAaC,IAA7B,EAAoCF,KAAK,CAACC,MAAN,CAAaE,KAAjD;AACA,WAAKL,QAAL,CAAc,CAACE,KAAK,CAACC,MAAN,CAAaC,IAAd,CAAd,EAAmCF,KAAK,CAACC,MAAN,CAAaE,KAAhD;AACD,K,CAED;;;;uCACmBH,K,EAAO;AAAA;;AACxB,UAAMI,cAAc,GAAG,0DAAvB;;AACA,UAAG,KAAKL,MAAL,EAAH,EAAiB;AACfM,QAAAA,KAAK,CAAC,cAAD,EAAiB;AACpBC,UAAAA,MAAM,EAAC,MADa;AAEpBC,UAAAA,OAAO,EAAC;AAAC,4BAAgB;AAAjB,WAFY;AAGpBC,UAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAClB,qBAAQ,KAAKjD,KAAL,CAAW2B,KADD;AAElB,wBAAW,KAAK3B,KAAL,CAAW4B;AAFJ,WAAf;AAHe,SAAjB,CAAL,CAOGsB,IAPH,CAOQ,UAACC,GAAD,EAAS;AACf,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,SATD,EASGF,IATH,CASQ,UAACC,GAAD,EAAS;AACf,cAAGA,GAAG,CAACnD,KAAJ,KAAc,CAAjB,EACE,MAAI,CAACgC,cAAL,CAAoB,WAApB,EAAiCmB,GAAG,CAAC1B,GAArC,EADF,KAEK,IAAG0B,GAAG,CAACnD,KAAJ,KAAc,CAAjB,EAAmB;AACtB;AACA,YAAA,MAAI,CAACM,QAAL,CAAc;AAACiB,cAAAA,QAAQ,EAAC,IAAV;AAAgBG,cAAAA,SAAS,EAAEyB,GAAG,CAAC1B,GAA/B;AAAoCzB,cAAAA,KAAK,EAAC;AAA1C,aAAd;AACD,WAHI,MAID,CACF;AACD;AAEF,SApBD,EAqBCqD,KArBD,CAqBO,UAACC,GAAD,EAAS;AACdC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAA,MAAI,CAAChD,QAAL,CAAc;AAACiB,YAAAA,QAAQ,EAAC,IAAV;AAAgBG,YAAAA,SAAS,EAAEiB,cAA3B;AAA2C3C,YAAAA,KAAK,EAAC;AAAjD,WAAd;AACD,SAxBD;AAyBD;;AAEDuC,MAAAA,KAAK,CAACkB,cAAN;AACD;;;sCAEiBlB,K,EAAO;AAAA;;AACvB,UAAMI,cAAc,GAAG,0DAAvB;;AACA,UAAG,KAAKL,MAAL,EAAH,EAAiB;AACfM,QAAAA,KAAK,CAAC,aAAD,EAAgB;AACnBC,UAAAA,MAAM,EAAC,MADY;AAEnBE,UAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAClB,qBAAQ,KAAKjD,KAAL,CAAW2B,KADD;AAElB,wBAAW,KAAK3B,KAAL,CAAW4B;AAFJ,WAAf;AAFc,SAAhB,CAAL,CAMGsB,IANH,CAMQ,UAACC,GAAD,EAAS;AACf,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,SARD,EAQGF,IARH,CAQQ,UAACC,GAAD,EAAS;AACf,cAAGA,GAAG,CAACnD,KAAJ,KAAc,CAAjB,EACE,MAAI,CAACgC,cAAL,CAAoB,WAApB,EAAiCmB,GAAG,CAAC1B,GAArC,EADF,KAEK,IAAG0B,GAAG,CAACnD,KAAJ,KAAc,CAAjB,EAAmB;AACtB;AACA,YAAA,MAAI,CAACM,QAAL,CAAc;AAACiB,cAAAA,QAAQ,EAAC,IAAV;AAAgBG,cAAAA,SAAS,EAAEyB,GAAG,CAAC1B,GAA/B;AAAoCzB,cAAAA,KAAK,EAAE;AAA3C,aAAd;AACD,WAHI,MAID,CACF;AACA;AAED;AAEF,SArBD,EAsBCqD,KAtBD,CAsBO,UAACC,GAAD,EAAS;AACdC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAA,MAAI,CAAChD,QAAL,CAAc;AAACiB,YAAAA,QAAQ,EAAC,IAAV;AAAgBG,YAAAA,SAAS,EAAEiB,cAA3B;AAA2C3C,YAAAA,KAAK,EAAE;AAAlD,WAAd;AACD,SAzBD;AA0BD;;AACDuC,MAAAA,KAAK,CAACkB,cAAN;AACD;;;8BAEQ;AACP,WAAKnD,QAAL,CAAc;AAACwB,QAAAA,UAAU,EAAE,CAAC,KAAK9B,KAAL,CAAW8B;AAAzB,OAAd;AACD;;;mCAEc4B,G,EAAKjC,G,EAAI;AACtB,WAAKnB,QAAL,qBAAgBoD,GAAhB,EAAsBjC,GAAtB;AACD;;;oCAEeiC,G,EAAI;AAClB,WAAKpD,QAAL,qBAAgBoD,GAAhB,EAAsB,EAAtB;AACD;;;6BAQQC,I,EAAMjB,K,EAAM;AACnB,UAAIkB,EAAE,GAAG,yJAAT;;AACA,UAAGD,IAAI,IAAI,OAAX,EAAmB;AACjB,YAAG,CAACC,EAAE,CAACC,IAAH,CAAQC,MAAM,CAACpB,KAAD,CAAN,CAAcqB,WAAd,EAAR,CAAJ,EAAyC;AACvC,eAAK/B,cAAL,CAAoB,WAApB,EAAiC,yBAAjC;AACD,SAFD,MAGI;AACF,eAAKC,eAAL,CAAqB,WAArB;AACD;AACF;;AAED,UAAG0B,IAAI,IAAI,UAAX,EAAsB;AACpB,YAAIK,aAAa,GAAG,KAApB;AACA,YAAGtB,KAAK,CAACuB,MAAN,IAAgB,CAAhB,IAAqB,KAAKJ,IAAL,CAAUnB,KAAV,CAArB,IAAyC,QAAQmB,IAAR,CAAanB,KAAb,CAAzC,IAAgE,QAAQmB,IAAR,CAAanB,KAAb,CAAnE,EACEsB,aAAa,GAAG,IAAhB,CAHkB,CAIpB;;AACA,YAAG,KAAKhE,KAAL,CAAW4B,QAAX,IAAuB,EAAvB,IAA6B,CAACoC,aAAjC,EAA+C;AAC7C,eAAKhC,cAAL,CAAoB,cAApB,EAAoC,qFAApC;AACD,SAFD,MAGI;AACFuB,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKvB,eAAL,CAAqB,cAArB;AACD;AACF;;AAED,UAAG0B,IAAI,IAAI,SAAX,EAAqB;AACnB,YAAG,CAAC,KAAK3D,KAAL,CAAW8B,UAAZ,IAA0BY,KAAK,IAAI,EAAnC,IAAyCA,KAAK,IAAI,KAAK1C,KAAL,CAAW4B,QAAhE,EAAyE;AACvE,eAAKI,cAAL,CAAoB,aAApB,EAAmC,8BAAnC;AACD,SAFD,MAGI;AACF,eAAKC,eAAL,CAAqB,aAArB;AACD;AACF,OAhCkB,CAiCnB;;AACD;;;6BAEO;AACN,UAAG,KAAKjC,KAAL,CAAWc,SAAX,IAAwB,EAAxB,IAA8B,KAAKd,KAAL,CAAWe,YAAX,CAAwBkD,MAAxB,IAAkC,EAAhE,IAAsE,KAAKjE,KAAL,CAAWgB,WAAX,IAA0B,EAAnG,EACE,OAAO,IAAP;AACF,aAAO,KAAP;AACD;;;6BAEQ;AAEP,UAAIL,QAAQ,GAAG;AACbM,QAAAA,WAAW,EAAE,KAAKmB,OADL;AAEbxB,QAAAA,aAAa,EAAE,KAAKmB,YAFP;AAGbX,QAAAA,kBAAkB,EAAE,KAAKe,iBAHZ;AAIbjB,QAAAA,mBAAmB,EAAE,KAAKgB,kBAJb;AAKbgC,QAAAA,aAAa,EAAE,KAAK5B;AALP,OAAf;AAQA,UAAI6B,QAAQ,GAAG;AACbrD,QAAAA,SAAS,EAAE,KAAKd,KAAL,CAAWc,SADT;AAEbC,QAAAA,YAAY,EAAE,KAAKf,KAAL,CAAWe,YAFZ;AAGbC,QAAAA,WAAW,EAAC,KAAKhB,KAAL,CAAWgB;AAHV,OAAf;AAMA,aAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKM,cAAL,EADH,EAEE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAqB,QAAA,EAAE,EAAC,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKtB,KAAL,CAAW8B,UAAX,IAAyB,oBAAC,KAAD;AAAO,QAAA,QAAQ,EAAEnB,QAAjB;AAA2B,QAAA,KAAK,EAAEwD,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD5B,EAEG,CAAC,KAAKnE,KAAL,CAAW8B,UAAZ,IAA0B,oBAAC,MAAD;AAAQ,QAAA,QAAQ,EAAEnB,QAAlB;AAA4B,QAAA,KAAK,EAAEwD,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAF7B,CAFF,CAFF;AAUD;;;;EAxL+B1E,S;;SAAb4B,I","sourcesContent":["import React, {Component} from 'react';\nimport { Redirect } from 'react-router-dom';\nimport \"./login.css\";\nimport Notification from \"../Control/Notification\";\nimport user_img from \"./user.png\";\nimport pwd_img from \"./pwd.png\";\n\nclass Signup extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover1: false, \n      hover2: false\n    }\n\n    this.toggleHover1 = this.toggleHover1.bind(this);\n    this.toggleHover2 = this.toggleHover2.bind(this);\n  };\n\n  toggleHover1(){\n    this.setState({hover1: !this.state.hover1})\n  }\n\n  toggleHover2(){\n    this.setState({hover2: !this.state.hover2})\n  }\n\n  render(){\n\n    var width1, width2;\n    if (this.state.hover1) {\n      width2 = {width: '40%'}\n      width1 = {width: '60%'}\n    } else {\n      width2 = {width: '50%'}\n    }\n\n    if (this.state.hover2) {\n      width1 = {width: '40%'}\n      width2 = {width: '60%'}\n    } else {\n      if(this.state.hover1){\n        width1 = {width: '60%'}\n      }\n      else{\n        width1 = {width: '50%'}\n      }\n    }\n\n    return (\n      <div className=\"login-board\">\n        <div className=\"login-wrapper\">\n        <h2 className=\"formHeader\">Sign Up</h2>\n        <form onSubmit={this.handleSubmit}>\n            <div className = 'input_div user'>\n              <img className = 'input_icon' src = {user_img} alt='user'/>\n              <input type = 'text' className=\"form_input\" name=\"email\" placeholder=\"email address\" onChange={this.props.handlers.changeHandler} />\n              <p className=\"warning\">{this.props.error.email_err ? this.props.error.email_err : \"\"}</p>\n            </div>\n            <div className ='input_div pwd'>\n              <img className = 'input_icon' src = {pwd_img} alt='pwd'/>\n              <input type = 'password' className=\"form_input\" name=\"password\" placeholder=\"password(min. 8 characters)\" onChange={this.props.handlers.changeHandler} />\n              <p className=\"warning\">{this.props.error.password_err ? this.props.error.password_err : \"\"}</p>\n            </div>\n            <div className ='input_div pwd'>\n              <img className = 'input_icon' src = {pwd_img} alt='pwd'/>\n              <input type = 'password' className=\"form_input\" name=\"reenter\" placeholder=\"reenter the password\" onChange={this.props.handlers.changeHandler} />\n              <p className=\"warning\">{this.props.error.reenter_err ? this.props.error.reenter_err : \"\"}</p>\n            </div>\n            <div className=\"submit-div\">\n              <button className=\"btn submit-btn\" onMouseEnter={this.toggleHover1} onMouseLeave={this.toggleHover1} onClick={this.props.handlers.showHandler} style={width1} id=\"signup-btn\">LOG IN</button>\n              <input type=\"submit\" className=\"btn submit-btn\" onMouseEnter={this.toggleHover2} onMouseLeave={this.toggleHover2} onClick={this.props.handlers.signupSubmitHandler} style={width2} id=\"login-btn\" value=\"SIGN UP\" />\n            </div>\n        </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Login extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover1: false, \n      hover2: false\n    }\n\n\n    this.toggleHover1 = this.toggleHover1.bind(this);\n    this.toggleHover2 = this.toggleHover2.bind(this);\n  };\n\n\n\n  toggleHover1(){\n    this.setState({hover1: !this.state.hover1})\n  }\n\n  toggleHover2(){\n    this.setState({hover2: !this.state.hover2})\n  }\n\n  render(){\n\n    var width1, width2;\n    if (this.state.hover1) {\n      width2 = {width: '40%'}\n      width1 = {width: '60%'}\n    } else {\n      width2 = {width: '50%'}\n    }\n\n    if (this.state.hover2) {\n      width1 = {width: '40%'}\n      width2 = {width: '60%'}\n    } else {\n      if(this.state.hover1){\n        width1 = {width: '60%'}\n      }\n      else{\n        width1 = {width: '50%'}\n      }\n    }\n\n    return (\n      <div className=\"login-board\">\n        <div className=\"login-wrapper\">\n        <h2 className=\"formHeader\">Welcome</h2>\n        <form onSubmit={this.handleSubmit}>\n            <div className = 'input_div user'>\n              <img className = 'input_icon' src = {user_img} alt='user'/>\n              <input type = 'text' className=\"form_input\" name=\"email\" placeholder=\"email address\" onChange={this.props.handlers.changeHandler} />\n              <p className=\"warning\">{this.props.error.email_err ? this.props.error.email_err : \"\"}</p>\n            </div>\n            <div className ='input_div pwd'>\n              <img className = 'input_icon' src = {pwd_img} alt='pwd'/>\n              <input type = 'password' className=\"form_input\" name=\"password\" placeholder=\"password(min. 8 characters)\" />\n              <p className=\"warning\">{this.props.error.password_err ? this.props.error.password_err : \"\"}</p>\n            </div>\n            <div className=\"forget\">\n              <p>FORGET PASSOWORD?</p>\n            </div>\n            <div className=\"submit-div\">\n              <input type=\"submit\" className=\"btn submit-btn\" onMouseEnter={this.toggleHover1} onMouseLeave={this.toggleHover1} onClick={this.props.handlers.loginSubmitHandler} style={width1} id=\"login-btn\" value=\"LOG IN\" />\n              <button className=\"btn submit-btn\" onMouseEnter={this.toggleHover2} onMouseLeave={this.toggleHover2} onClick={this.props.handlers.showHandler} style={width2} id=\"signup-btn\">SIGN UP</button>\n            </div>\n        </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default class User extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '', \n      reenter: '',\n      email_err:'', \n      password_err: '', \n      reenter_err: '',\n      login_disp: true,\n      redirect: false,\n      notif_msg:''\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.showValidation = this.showValidation.bind(this);\n    this.clearValidation = this.clearValidation.bind(this);\n    this.handleSignUpSubmit = this.handleSignUpSubmit.bind(this);\n    this.handleLoginSubmit = this.handleLoginSubmit.bind(this);\n    this.boxShow = this.boxShow.bind(this);\n    this.validate = this.validate.bind(this);\n    this.verify = this.verify.bind(this);\n    this.renderRedirect = this.renderRedirect.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({[event.target.name]: event.target.value});\n    this.validate([event.target.name], event.target.value);\n  }\n\n  //state code as property to pass to the notification page \n  handleSignUpSubmit(event) {\n    const SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n    if(this.verify()){\n      fetch(\"/user/signup\", {\n        method:'POST',\n        headers:{'Content-Type': 'application/json'},  \n        body:JSON.stringify({\n          \"email\":this.state.email,\n          \"password\":this.state.password  \n        })\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        if(res.state === 1)\n          this.showValidation(\"email_err\", res.msg);\n        else if(res.state === 0){\n          //TODO redict notification page\n          this.setState({redirect:true, notif_msg: res.msg, state:1});\n        }\n        else{\n          //TODO redirect signin page\n        }\n\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({redirect:true, notif_msg: SERVER_ERR_MSG, state:0});\n      });\n    }\n\n    event.preventDefault();\n  }\n\n  handleLoginSubmit(event) {\n    const SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n    if(this.verify()){\n      fetch(\"/user/login\", {\n        method:'POST',\n        body:JSON.stringify({\n          \"email\":this.state.email,\n          \"password\":this.state.password  \n        })\n      }).then((res) => {\n        return res.json();\n      }).then((res) => {\n        if(res.state === 1)\n          this.showValidation(\"email_err\", res.msg);\n        else if(res.state === 0){\n          //TODO redict notification page\n          this.setState({redirect:true, notif_msg: res.msg, state: 0});\n        }\n        else{\n          //TODO redirect profile page\n          // this.boxShow();\n\n        }\n\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({redirect:true, notif_msg: SERVER_ERR_MSG, state: 0});\n      });\n    }\n    event.preventDefault();\n  }\n\n  boxShow(){\n    this.setState({login_disp: !this.state.login_disp});\n  }\n\n  showValidation(elm, msg){\n    this.setState({[elm]: msg});\n  }\n\n  clearValidation(elm){\n    this.setState({[elm]: ''});\n  }\n\n  renderRedirect = () => {\n    if(this.state.redirect)\n      return <Redirect to={{pathname:'/notification', msg: this.state.notif_msg}} />\n  }\n\n\n  validate(type, value){\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if(type == 'email'){\n      if(!re.test(String(value).toLowerCase())){\n        this.showValidation(\"email_err\", \"Please type valid email\");\n      }\n      else{\n        this.clearValidation(\"email_err\");\n      }\n    }\n\n    if(type == 'password'){\n      let validPassword = false;\n      if(value.length >= 8 && /\\d/.test(value) && /[a-z]/.test(value) && /[A-Z]/.test(value))\n        validPassword = true;\n      // console.log(value);\n      if(this.state.password != '' && !validPassword){\n        this.showValidation(\"password_err\", \"Password must contain\\n1. 8 characters at least;\\n2. digit, uppercase and lowercase\");\n      }\n      else{\n        console.log(\"passed\");\n        this.clearValidation(\"password_err\");\n      }\n    }\n\n    if(type == 'reenter'){\n      if(!this.state.login_disp && value != '' && value != this.state.password){\n        this.showValidation(\"reenter_err\", \"Different with your password\");\n      }\n      else{\n        this.clearValidation(\"reenter_err\");\n      }\n    }\n    // this.verify();\n  }\n\n  verify(){\n    if(this.state.email_err == '' && this.state.password_err.length == '' && this.state.reenter_err == '')\n      return true;\n    return false;\n  }\n\n  render() {\n\n    var handlers = {\n      showHandler: this.boxShow,\n      changeHandler: this.handleChange,\n      loginSubmitHandler: this.handleLoginSubmit,\n      signupSubmitHandler: this.handleSignUpSubmit,\n      verifyHandler: this.verify\n    }\n\n    var errorMsg = {\n      email_err: this.state.email_err,\n      password_err: this.state.password_err,\n      reenter_err:this.state.reenter_err\n    }\n\n    return (\n      \n      <div>\n        {this.renderRedirect()}\n        <div className=\"bng\" id=\"user_bng\">\n          {this.state.login_disp && <Login handlers={handlers} error={errorMsg}/>}\n          {!this.state.login_disp && <Signup handlers={handlers} error={errorMsg}/>}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}