{"ast":null,"code":"import _classCallCheck from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/bowenwang/Nodejs_project/NPFReact/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/bowenwang/Nodejs_project/NPFReact/src/component/User/Logout.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nvar Logout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Logout, _Component);\n\n  function Logout(props) {\n    var _this;\n\n    _classCallCheck(this, Logout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Logout).call(this, props));\n\n    _this.renderRedirect = function () {\n      console.log(_this.state.hasSession);\n      if (_this.state.hasSession) return React.createElement(Redirect, {\n        to: {\n          pathname: '/notification',\n          msg: _this.state.notif_msg,\n          state: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      });else return React.createElement(Redirect, {\n        to: {\n          pathname: '/'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      redirect: true,\n      hasSession: false,\n      notif_msg: '',\n      initial: true\n    };\n    _this.renderRedirect = _this.renderRedirect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Logout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n      this.setState({\n        initial: false\n      });\n      fetch('/user/logout').then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        // console.log(res);\n        if (res.state) {\n          console.log(\"has session\");\n\n          _this2.setState({\n            hasSession: true,\n            notif_msg: \"Successfully logout\"\n          });\n        } else _this2.setState({\n          hasSession: false\n        });\n      }).catch(function (err) {\n        //\n        console.log(\"went wrong\");\n\n        _this2.setState({\n          hasSession: true,\n          notif_msg: SERVER_ERR_MSG\n        });\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.isCancelled = true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, this.state.initial && this.renderRedirect());\n    }\n  }]);\n\n  return Logout;\n}(Component);\n\nexport { Logout as default };","map":{"version":3,"sources":["/Users/bowenwang/Nodejs_project/NPFReact/src/component/User/Logout.js"],"names":["React","Component","Redirect","Logout","props","renderRedirect","console","log","state","hasSession","pathname","msg","notif_msg","redirect","initial","bind","SERVER_ERR_MSG","setState","fetch","then","res","json","catch","err","isCancelled"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,QAAT,QAAyB,kBAAzB;;IAEqBC,M;;;;;AAClB,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;;AADiB,UAkCrBC,cAlCqB,GAkCJ,YAAM;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWC,UAAvB;AACA,UAAG,MAAKD,KAAL,CAAWC,UAAd,EACC,OAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE;AAACC,UAAAA,QAAQ,EAAC,eAAV;AAA2BC,UAAAA,GAAG,EAAE,MAAKH,KAAL,CAAWI,SAA3C;AAAsDJ,UAAAA,KAAK,EAAE;AAA7D,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP,CADD,KAGC,OAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE;AAACE,UAAAA,QAAQ,EAAC;AAAV,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAxCoB;;AAEjB,UAAKF,KAAL,GAAa;AACZK,MAAAA,QAAQ,EAAC,IADG;AAEZJ,MAAAA,UAAU,EAAC,KAFC;AAGZG,MAAAA,SAAS,EAAC,EAHE;AAIZE,MAAAA,OAAO,EAAC;AAJI,KAAb;AAMH,UAAKT,cAAL,GAAsB,MAAKA,cAAL,CAAoBU,IAApB,uDAAtB;AARoB;AASpB;;;;wCACkB;AAAA;;AAClB,UAAMC,cAAc,GAAG,0DAAvB;AACA,WAAKC,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAE;AAAV,OAAd;AACAI,MAAAA,KAAK,CAAC,cAAD,CAAL,CAAsBC,IAAtB,CAA2B,UAACC,GAAD,EAAS;AAC/B,eAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,OAFJ,EAEMF,IAFN,CAEW,UAACC,GAAD,EAAS;AACf;AACD,YAAGA,GAAG,CAACZ,KAAP,EAAa;AACZF,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACE,UAAA,MAAI,CAACU,QAAL,CAAc;AAACR,YAAAA,UAAU,EAAE,IAAb;AAAmBG,YAAAA,SAAS,EAAC;AAA7B,WAAd;AACF,SAHD,MAKF,MAAI,CAACK,QAAL,CAAc;AAACR,UAAAA,UAAU,EAAE;AAAb,SAAd;AACE,OAVJ,EAWIa,KAXJ,CAWU,UAACC,GAAD,EAAS;AACf;AACAjB,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACH,QAAA,MAAI,CAACU,QAAL,CAAc;AAACR,UAAAA,UAAU,EAAE,IAAb;AAAmBG,UAAAA,SAAS,EAAEI;AAA9B,SAAd;AACG,OAfJ;AAgBA;;;yCACmB;AACnB,WAAKQ,WAAL,GAAmB,IAAnB;AACA;;;6BAUO;AACP,aACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKhB,KAAL,CAAWM,OAAX,IAAsB,KAAKT,cAAL,EADxB,CADD;AAKA;;;;EAjDkCJ,S;;SAAfE,M","sourcesContent":["import React, {Component} from 'react';\nimport { Redirect } from 'react-router-dom';\n\nexport default class Logout extends Component {\n  \tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tredirect:true,\n\t    \thasSession:false,\n\t    \tnotif_msg:'',\n\t    \tinitial:true\n\t\t}\n\t\tthis.renderRedirect = this.renderRedirect.bind(this);\n\t};\n\tcomponentDidMount(){\n\t\tconst SERVER_ERR_MSG = \"Oops, it seems that we have some troubles for our server\";\n\t\tthis.setState({initial: false});\n\t\tfetch('/user/logout').then((res) => {\n\t      return res.json();\n\t    }).then((res) => {\n\t      // console.log(res);\n\t    \tif(res.state){\n\t    \t\tconsole.log(\"has session\");\n\t\t      \tthis.setState({hasSession: true, notif_msg:\"Successfully logout\"});\n\t    \t}\n\t\t  \telse\n\t\t\t\tthis.setState({hasSession: false});\n\t    })\n\t    .catch((err) => {\n\t    \t//\n\t    \tconsole.log(\"went wrong\");\n\t\t\tthis.setState({hasSession: true, notif_msg: SERVER_ERR_MSG});\n\t    });\n\t}\n\tcomponentWillMount(){\n\t\tthis.isCancelled = true;\n\t}\n\n\trenderRedirect = () => {\n\t\tconsole.log(this.state.hasSession);\n\t\tif(this.state.hasSession)\n\t\t\treturn <Redirect to={{pathname:'/notification', msg: this.state.notif_msg, state: 0}} />\n\t\telse\n\t\t\treturn <Redirect to={{pathname:'/'}} />\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t{this.state.initial && this.renderRedirect()}\n\t\t\t</div>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}